# Azure OpenAI + Snowflake Hybrid Configuration Example
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control!
#
# ⚠️  STRICT MODE: ALL VALUES BELOW ARE REQUIRED - NO DEFAULTS! ⚠️
# ⚠️  The application will fail if ANY of these are missing    ⚠️

# =============================================================================
# AZURE OPENAI CONFIGURATION (REQUIRED)
# =============================================================================

# Azure OpenAI Endpoint (your specific deployment)
# Use the Azure OpenAI endpoint (NOT the Azure AI Foundry endpoint):
AZURE_OPENAI_ENDPOINT=https://29192-md6s8lam-eastus2.openai.azure.com/

# Azure OpenAI API Key (get from Azure Portal -> Keys and Endpoint)
AZURE_OPENAI_API_KEY=your_actual_api_key_here

# Azure OpenAI API Version (REQUIRED - no default)
AZURE_OPENAI_API_VERSION=2024-02-01

# IMPORTANT: These should be your DEPLOYMENT NAMES, not model names
# Based on your Azure OpenAI Studio -> Deployments tab:

# Embedding Model Deployment Name (from your deployments: text-embedding-ada-002)
EMBEDDING_MODEL=text-embedding-ada-002

# Chat Model Deployment Name (from your deployments: gpt-4.1-mini)
CHAT_MODEL=gpt-4.1-mini

# =============================================================================
# SNOWFLAKE CONFIGURATION (REQUIRED FOR HYBRID FEATURES)
# =============================================================================

# Snowflake Account Identifier (e.g., abc12345.us-east-1)
SNOWFLAKE_ACCOUNT=DGTENIK-QX43486

# Snowflake User Credentials
SNOWFLAKE_USER=DAVID3XU
SNOWFLAKE_PASSWORD=your_password_here

# Snowflake Warehouse and Database Settings
SNOWFLAKE_WAREHOUSE=COMPUTE_WH
SNOWFLAKE_DATABASE=WAMEX_EXPLORATION
SNOWFLAKE_SCHEMA=GEOSPATIAL_DATA

# Optional: Snowflake Role (defaults to ACCOUNTADMIN if not specified)
SNOWFLAKE_ROLE=ACCOUNTADMIN

# =============================================================================
# HYBRID SYSTEM CONFIGURATION (FEATURE FLAGS)
# =============================================================================

# Enable hybrid Azure OpenAI + Snowflake features (true/false)
ENABLE_HYBRID_FEATURES=false

# Enable Snowflake vector storage and search (true/false)
ENABLE_SNOWFLAKE_VECTORS=false

# Enable title-based embedding processing (true/false)
ENABLE_TITLE_EMBEDDINGS=false

# =============================================================================
# PERFORMANCE CONFIGURATION (OPTIONAL - WITH DEFAULTS)
# =============================================================================

# Azure OpenAI Rate limiting (optional - has defaults)
MAX_EMBEDDING_REQUESTS_PER_MINUTE=120
MAX_EMBEDDING_TOKENS_PER_MINUTE=20000

# Azure OpenAI Retry configuration (optional - has defaults)
MAX_RETRIES=3
RETRY_DELAY_SECONDS=1

# Vector Processing Settings
VECTOR_DIMENSION=1536
EMBEDDING_BATCH_SIZE=100
SEARCH_RESULT_LIMIT=10

# Snowflake Connection Pool Settings
SNOWFLAKE_BATCH_SIZE=1000
SNOWFLAKE_POOL_SIZE=5
SNOWFLAKE_POOL_TIMEOUT=30

# Health Check Settings
HEALTH_CHECK_TIMEOUT=5

# =============================================================================
# TROUBLESHOOTING NOTES:
# =============================================================================
#
# Azure OpenAI Setup:
# ✅ Correct Azure OpenAI Endpoint: https://29192-md6s8lam-eastus2.openai.azure.com/
# ❌ Don't use Azure AI Foundry endpoint: https://29192-md6s8lam-eastus2.services.ai.azure.com/api/p
#
# Your available Azure deployments:
# - gpt-4.1-mini (chat model)
# - text-embedding-ada-002 (embedding model)
#
# Snowflake Setup:
# 1. Create a Snowflake account and note your account identifier
# 2. Create a warehouse, database, and schema for the project
# 3. Ensure your user has proper permissions for vector operations
# 4. Test connection before enabling hybrid features
#
# Gradual Rollout:
# 1. Start with ENABLE_HYBRID_FEATURES=false for testing
# 2. Enable individual features once Snowflake is properly configured
# 3. Monitor system health through /health/hybrid endpoint
#
# If you get errors:
# - "DeploymentNotFound": Check Azure OpenAI deployment names
# - "SnowflakeOperationalError": Verify Snowflake credentials and permissions
# - "ConnectionError": Check network connectivity to both services
#
# =============================================================================
